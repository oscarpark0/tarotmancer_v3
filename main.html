<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tarotmancer</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lora:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <script src="starfield.js"></script>
    <style>
      html, body { background: #000; }
      body { opacity: 0; filter: blur(6px); transform: scale(0.985); }
      body.page-enter { 
        opacity: 1; 
        filter: blur(0);
        transform: scale(1);
        transition: opacity 520ms ease, filter 700ms ease, transform 700ms ease;
        will-change: opacity, filter, transform;
      }
      #entry-veil {
        position: fixed; inset: 0; z-index: 999;
        pointer-events: none; opacity: 1; visibility: visible;
        background:
          radial-gradient(120vh 120vh at 50% 50%, rgba(0,255,140,0.12), rgba(0,0,0,0) 60%),
          radial-gradient(200vh 140vh at 50% -20%, rgba(0,255,60,0.08), rgba(0,0,0,0) 55%),
          #000;
      }
      #entry-veil::before {
        content: '';
        position: absolute; inset: 0;
        background: radial-gradient(60vh 60vh at 50% 50%, rgba(0,255,120,0.15), rgba(0,0,0,0) 55%);
        mix-blend-mode: screen; filter: blur(2px);
      }
      #entry-veil::after {
        content: '';
        position: absolute; inset: 0;
        background: radial-gradient(120vh 80vh at 50% 110%, rgba(0,0,0,0), rgba(0,0,0,0.85) 80%);
      }
      #entry-veil.veil-hide { opacity: 0; visibility: hidden; transition: opacity 600ms ease, visibility 0s linear 600ms; }
      @media (prefers-reduced-motion: reduce) {
        body { filter: none; transform: none; }
        body.page-enter { transition: none; }
        #entry-veil.veil-hide { transition: none; }
      }
    </style>
    <script
    src="https://app.rybbit.io/api/script.js"
    data-site-id="727"
    defer
></script>
</head>
<body>
    <div id="entry-veil" aria-hidden="true"></div>
    <div class="container">
        <h1>tarotmancer</h1>

        <div id="controls" class="controls-area">
            <div class="spread-selector">
                <span>Select Spread:</span>
                <div class="spread-buttons">
                    <button class="spread-button active" data-spread="threeCard">3 Card</button>
                    <button class="spread-button" data-spread="celticCross">Celtic Cross</button>
                    <button class="spread-button" data-spread="horseshoe">Horseshoe</button>
                </div>
            </div>
            <div class="action-buttons">
                <button id="dealButton" disabled>Deal</button>
            </div>
        </div>

        <div id="spreadAreaWrapper" class="spread-area-wrapper">
            <div id="spreadArea" class="spread-area"></div>
        </div>

        <div class="output-area">
            <div id="stats-controls" class="tab-header">
                <button class="tab-button active" data-tab="interpretation">Interpretation</button>
                <button class="tab-button" data-tab="stats">Statistics</button>
            </div>
            <div class="tab-content">
                <div id="interpretationArea" class="interpretation-area">
                    <button id="interpretButton" disabled>Get Interpretation</button>
                    <div id="interpretationText"> </div>
                </div>
                <div id="statsArea" class="stats-area hidden">
                    <h2>Stats</h2>
                    <div id="statsText"></div>
                </div>
            </div>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        requestAnimationFrame(() => document.body.classList.add('page-enter'));
        const veil = document.getElementById('entry-veil');
        setTimeout(() => veil && veil.classList.add('veil-hide'), 60);
        window.skyMain = initStarfield({ count: 220, zIndex: 0, maxSize: 2.2, minSize: 0.6, layers: 3 });
      });
    </script>
    <script src="tarot.js"></script>
</body>
</html>
